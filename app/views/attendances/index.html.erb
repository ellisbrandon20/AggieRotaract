<h1 class="title">Upcoming Events</h1>

<% if @user_upcoming_events.nil? %>
    <div> You are not signed up for any events. </div>
<% else %>
    <% @user_upcoming_events.each do |event| %>
        <div class="event-card">
            <div class="column-left">
                <div class="col-sm-9">
                    <div class="col-xs-12 event-btn">
                        <button type="button" class="btn btn-success" disabled>Going</button>
                        <button type="button" class="btn btn-warning" disabled>Wait Listed</button>
                    </div>
                    <div class="row col-sm-12">
                        <h3 id="event_title"><%= event[:active_record].name %></h3>
                    </div>
                    <div class="row col-sm-12">
                        <b>Time: </b>
                        <div class="event-item-margin">
                            <%= event[:active_record].start_time.strftime("%I:%M %p")%>
                            -
                            <%= event[:active_record].end_time.strftime("%I:%M %p") %>
                        </div>
                    </div>
                    <div class="row col-sm-12">
                        <b>Date: </b>
                        <div class="event-item-margin">
                            <%= event[:active_record].date.strftime("%B %d, %Y") %>
                            <%= event[:wait_list_pos] %>
                        </div>
                    </div>
                    <div class="row col-sm-12">
                        <b>Contact: </b>
                        <div class="event-item-margin">
                            <%= event[:active_record].contact %>
                        </div>
                    </div>
                    <div class="row col-sm-12">
                        <a href="" id="address" class="address" target="_blank"><%= event[:active_record].address %></a>
                    </div>
                </div>
            </div>
            <div class="column-center">
                <div class="event-image">
                        <%= image_tag(event[:active_record].image, class: "img-thumbnail") %>
                </div>
            </div>
            <div class="column-right">
                <div class="event-btn">
                    <button type="button" class="btn btn-primary">View Details</button>
                </div>
                <div class="event-btn">
                    <button type="button" class="btn btn-primary">Edit Comment</button>
                </div>
                <div class="event-btn">
                    <button type="button" class="btn btn-danger">Remove Me</button>
                </div>
            </div>
        </div>
        <br>
        <br>
    <% end %>
<% end %>
<script>
// couldnt get the script to run from any of the coffee files 
$(document).ready(function(){
    var $editItem, $elements, $link, $pluslink, i;
    $elements = document.getElementsByClassName('address');
    i = 0;
    while (i < $elements.length) {
        $editItem = $elements[i];
        $link = $editItem.text;
        $pluslink = $link.replace(/\s+/g, '+');
        $elements[i].href = 'https://www.google.com/maps?q=' + $pluslink;
        $elements[i].text = 'Google Maps Link';
        i++;
    }
});
</script>